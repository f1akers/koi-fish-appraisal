# Koi Fish Appraisal

A web application for appraising Koi fish through computer vision and machine learning.

## Overview

This application uses multiple factors to appraise koi fish:
- **Size Detection** - Uses reference coin for accurate measurements
- **Pattern Recognition** - Classifies Ogon, Showa, and Kohaku patterns
- **Color Analysis** - Quantifies color distribution and quality
- **Symmetry Analysis** - Measures bilateral symmetry using PCA
- **Price Prediction** - Linear regression model trained on appraised data

## Tech Stack

| Component | Technology |
|-----------|------------|
| Backend | Python, FastAPI, OpenCV, Ultralytics |
| Frontend | Vite, React (TypeScript), Tailwind CSS |
| ML Models | YOLOv8, Scikit-learn |

## Project Structure

```
koi/
├── docs/                    # Documentation
│   ├── FEATURES_INDEX.md    # Feature tracking
│   ├── features/            # Detailed feature specs
│   ├── koi spec.md          # Original specification
│   └── coin_sizes.md        # Coin reference data
├── backend/                 # Python FastAPI backend
│   ├── app/                 # Application code
│   ├── models/              # ML model files
│   ├── images/              # Training images
│   └── requirements.txt
└── frontend/                # React TypeScript frontend
    ├── src/
    └── package.json
```

## Getting Started

### Prerequisites
- Python 3.10+
- Node.js 18+
- npm

### Backend Setup

```bash
cd backend

# Create virtual environment
python -m venv venv

# Activate virtual environment
# Windows
.\venv\Scripts\activate
# Linux/Mac
source venv/bin/activate

# Install dependencies
pip install -r requirements.txt

# Run development server
uvicorn app.main:app --reload --port 8000
```

### Frontend Setup

```bash
cd frontend

# Install dependencies
npm install

# Run development server
npm run dev
```

The frontend runs on `http://localhost:5173` and proxies API requests to `http://localhost:8000`.

## ML Models Required

Place the following trained models in `backend/models/`:

| Model | Purpose |
|-------|---------|
| `koi-segment.pt` | YOLOv8 instance segmentation for koi fish |
| `coin.pt` | YOLOv8 detection for reference coins |
| `koi-pattern.pt` | YOLOv8 classification for patterns |
| `linear.pkl` | Trained linear regression (generated by trainer) |

## Documentation

- [Features Index](docs/FEATURES_INDEX.md) - Track feature progress
- [Fish Metrics](docs/features/fish-metrics.md) - Size, pattern, color, symmetry
- [Linear Regression Trainer](docs/features/linear-regression-trainer.md) - Model training
- [Frontend Capture](docs/features/frontend-capture.md) - Camera interface
- [Results Display](docs/features/results-display.md) - Results and export

## Development Guidelines

1. Follow the coding standards defined in FEATURES_INDEX.md
2. Create feature branches for new development
3. Update documentation when features are completed
4. Write tests for new functionality

## License

Private - All rights reserved
